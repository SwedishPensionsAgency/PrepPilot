---
title: 'Shiny: Ett ramverk för rapportering, presentation och rapport'
output:
  ioslides_presentation:
    fig_caption: yes
    logo: img/Pensionsmyndigheten.jpg
    widescreen: yes
runtime: shiny
incremental: yes
---


<!--// 
Disposition:
- Kort genomgång av de viktigaste begreppen
- Integration med R
- Presentationsformer
- 

Sammanfattande text:
Shiny är ett ramverk för att integrera R med en webbaserad frontend. Genom sin stora flexibilitet kan Shiny användas för att 

Shiny är 



-->


## Vad är Shiny?

I modern statistikrapportering har gränsen mellan presentationsverktyg, webbrowsing, statistisk programmering och bildhantering blivit mycket suddig. 

*Shiny* är ett ramverk som ger R-programmerare möjligheten att integrera samtliga dessa komponenter via R.

## Ett web-framework med fyrverkerier

Många användsningsområden: 


## Interaktiv, länkbar grafik

```{r, echo=FALSE, warning=FALSE, message=FALSE}
require(shiny)
require(ggvis)
require(ggplot2)

# inputPanel(
#   selectInput("n_breaks", label = "Number of bins:",
#               choices = c(10, 20, 35, 50), selected = 20),
#   
#   sliderInput("bw_adjust", label = "Bandwidth adjustment:",
#               min = 0.2, max = 2, value = 1, step = 0.2)
# )

# shinyApp(
#   ui = bootstrapPage(
#     ggvisOutput("p"),
#     uiOutput("p_ui")
#   ),
#   server = function(..., session) {
#     mtcars %>%
#       ggvis(~wt, ~mpg) %>%
#       layer_points() %>%
#       layer_smooths(span = input_slider(0, 1)) %>%
#       bind_shiny("p", "p_ui")
#   }
# )
shinyApp(
  ui = fluidPage(
    responsive = FALSE,
    
    fluidRow(
      column(6, ggvisOutput('plot1')),
      column(6, 
             ggvisOutput('plot2')
             # ggvisOutput('plot3')
             )
      )
    ),
  
  server = function(input, output, session) {
    
    # Combine the selected variables into a new data frame
    dta <- reactive({
      if (sum(lb$selected()) < 2)
        quakes
      else
        quakes[lb$selected(), ]
      })
    ndta <- reactive(quakes[lb$selected(), ])
    
    lb <- linked_brush(keys = 1:nrow(quakes), "blue")
    
    quakes %>%
      ggvis(~depth, ~mag, fill = ~stations) %>%
      layer_points(size.brush := 200) %>%
      lb$input() %>%
      layer_points(fill := "red", data = ndta) %>%
      hide_legend("fill") %>%
      bind_shiny("plot1")
    
    quakes %>%
      ggvis(~lat, ~long, fill = ~stations) %>%
      layer_points(size.brush := 200) %>%
      lb$input() %>%
      layer_points(fill := "red", data = ndta) %>%
      hide_legend("fill") %>%
      # set_options(height = 200, width = 300, keep_aspect = TRUE) %>%
      bind_shiny("plot2", "plot2_ui")

    dta %>%
      ggvis(~stations) %>%
      layer_densities(fill := "red") %>%
      hide_legend("fill") %>%
      set_options(height = 200, width = 300, keep_aspect = TRUE) %>%
      bind_shiny("plot3", "plot3_ui")
    
    output$dTbl <- renderTable({
      mtcars
      })
    options = list(height = 400)
    }
  )

```

## Det är lätt att återanvända kod

```{r, echo=FALSE, message=FALSE}
source("prepInlineApp.R")
prepInlineApp()
```


## Exportera och ladda hem data
```{r, echo = FALSE}

```


## Ett ramverk, inte en app

- Shiny är ett _ramverk_, inte en _app_.
- WYSIWYG-appar: Tableau eller Excel
- Ramverk: Reporting Services eller 

```{r}
summary(cars)
```


